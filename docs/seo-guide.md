# SEO Best Practices Guide

This guide covers SEO implementation and optimization for the b-audio.vn project.

## Overview

Our project uses automated SEO scanning via `scripts/seo_scan.sh` to ensure consistent SEO implementation across all environments.

## Essential SEO Components

### 1. Robots.txt
**Location**: `apps/web/public/robots.txt`
```txt
User-agent: *
Allow: /

# Block development/admin paths
Disallow: /admin/
Disallow: /_next/
Disallow: /api/

# Sitemap location
Sitemap: https://b-audio.vn/sitemap.xml
```

### 2. XML Sitemap
**Generated by**: `next-sitemap` package
**Config**: `apps/web/next-sitemap.config.js`
**Output**: `apps/web/public/sitemap.xml`, `sitemap-0.xml`

### 3. Meta Tags Structure
Every page should include:
```tsx
export const metadata: Metadata = {
  title: 'Page Title | B-Audio Vietnam',
  description: 'Clear, compelling description under 160 characters',
  alternates: { canonical: 'https://b-audio.vn/page-url' },
  openGraph: {
    title: 'Page Title',
    description: 'Same as meta description',
    url: 'https://b-audio.vn/page-url',
    siteName: 'B-Audio Vietnam',
    images: [{
      url: 'https://b-audio.vn/og/page-image.jpg',
      width: 1200, height: 630, alt: 'Image description'
    }],
    locale: 'vi_VN', type: 'website'
  },
  twitter: { 
    card: 'summary_large_image', 
    images: ['https://b-audio.vn/og/page-image.jpg'] 
  }
}
```

### 4. Structured Data (JSON-LD)
**For Products**:
```tsx
const jsonLdProduct = {
  "@context": "https://schema.org/",
  "@type": "Product",
  "name": product.title,
  "image": product.imageUrl,
  "description": product.description,
  "brand": { "@type": "Brand", "name": "B-Audio Vietnam" },
  "offers": {
    "@type": "Offer",
    "url": canonical,
    "priceCurrency": "VND",
    "price": product.price,
    "availability": "https://schema.org/InStock"
  }
}

// In component:
<script
  type="application/ld+json"
  suppressHydrationWarning
  dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLdProduct) }}
/>
```

## SEO Scan Tool

### Usage
```bash
# Basic scan
./scripts/seo_scan.sh

# JSON output for CI
./scripts/seo_scan.sh --json --output reports/seo-report.json

# Strict mode (fail if score < 70)
./scripts/seo_scan.sh --strict

# Custom path and depth
./scripts/seo_scan.sh --root ./apps/web --max-depth 5
```

### Scoring System
- **90-100 (A)**: Excellent SEO implementation
- **80-89 (B)**: Good, minor improvements needed  
- **70-79 (C)**: Acceptable, some issues to address
- **60-69 (D)**: Poor, requires significant work
- **<60 (F)**: Failing, major SEO problems

### What's Checked
- ✅ Robots.txt presence and location
- ✅ XML sitemap availability
- ✅ Meta descriptions in HTML/TSX files
- ✅ Image alt attributes
- ✅ JSON-LD structured data syntax
- ✅ Open Graph and Twitter meta tags
- ✅ Canonical URLs

## Content Guidelines

### Page Titles
- Format: `Specific Title | B-Audio Vietnam`
- Keep under 60 characters
- Include target keywords naturally
- Make each title unique

### Meta Descriptions  
- 120-160 characters optimal
- Include call-to-action
- Summarize page content
- Include target keywords

### Images
- Always include meaningful `alt` attributes
- Use descriptive filenames
- Optimize for web (WebP format preferred)
- Include in structured data when relevant

### URLs
- Use descriptive, readable URLs
- Include target keywords
- Keep consistent structure: `/products/category/product-name`
- Always set canonical URLs

## CI/CD Integration

### GitHub Actions
Our `seo-scan.yml` workflow:
- Runs on every PR and push to main
- Generates SEO report artifact
- Fails build if `--strict` mode score < 70

### Local Development
```bash
# Check SEO before committing
npm run build
./scripts/seo_scan.sh --root ./apps/web --strict

# Generate detailed report
./scripts/seo_scan.sh --json --output ./reports/local-seo.json
```

## Common Issues & Fixes

### Missing Meta Descriptions
**Problem**: HTML pages without meta description tags
**Fix**: Add to page metadata:
```tsx
export const metadata = {
  description: "Your compelling page description here"
}
```

### Broken JSON-LD
**Problem**: Invalid JSON syntax in structured data
**Fix**: Validate JSON using online tools, ensure proper escaping:
```tsx
dangerouslySetInnerHTML={{ __html: JSON.stringify(data) }}
```

### Missing Alt Text
**Problem**: Images without alt attributes
**Fix**: Always include meaningful alt text:
```tsx
<Image src="/path/to/image.jpg" alt="Descriptive alt text" />
```

### No Canonical URLs
**Problem**: Pages without canonical meta tags
**Fix**: Set canonical in metadata:
```tsx
alternates: { canonical: 'https://b-audio.vn/current-page' }
```

## Performance Considerations

### Core Web Vitals
- Optimize images (WebP, appropriate sizes)
- Minimize JavaScript bundles
- Use Next.js Image component for lazy loading
- Implement proper caching headers

### Technical SEO
- Ensure fast server response times (<200ms)
- Use HTTP/2 and compression
- Implement proper internal linking
- Monitor crawl errors in Google Search Console

## Monitoring & Maintenance

### Tools
- **Google Search Console**: Monitor crawl status, search performance
- **PageSpeed Insights**: Core Web Vitals tracking  
- **Local SEO Scan**: `./scripts/seo_scan.sh` before deployments
- **CI Reports**: Download artifacts from GitHub Actions

### Regular Tasks
- Weekly: Review SEO scan reports
- Monthly: Check Google Search Console for issues
- Quarterly: Update structured data schemas
- Before releases: Run strict SEO validation

## Resources

- [Google SEO Starter Guide](https://developers.google.com/search/docs/beginner/seo-starter-guide)
- [Schema.org Documentation](https://schema.org/)
- [Next.js SEO Guide](https://nextjs.org/learn/seo/introduction-to-seo)
- [Open Graph Protocol](https://ogp.me/)

---

For technical issues with SEO implementation, check the automated scan results or review this guide's examples.
